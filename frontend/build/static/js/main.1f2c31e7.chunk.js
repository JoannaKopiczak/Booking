(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,a,t){},166:function(e,a,t){},167:function(e,a,t){},168:function(e,a,t){},169:function(e,a,t){},171:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(78),l=t.n(s),o=(t(88),t(24)),c=t(25),i=t(27),u=t(26),d=t(28),m=t(174),p=t(176),h=t(177),g=t(175),b=t(173),v=t(17),f=t(31),E=t.n(f),y=t(47),w=t(48),O=t.n(w);t(112);var j=Object(v.b)(function(e){return{loggedIn:e.auth.loggedIn}},function(e){return{signOut:function(){return e(function(e){e({type:"SIGNOUT"})})}}})(function(e){function a(){!function(){var e=document.getElementsByClassName("slider")[0];document.getElementById("root").style.overflow="hidden",e.classList.toggle("active"),document.getElementsByClassName("list")[0].childNodes.forEach(function(e,a){e.style.animation?e.style.animation="":e.style.animation="listItemFade 0.5s ease forwards ".concat(a/5+.3,"s")})}(),document.getElementById("burger").classList.toggle("is-active")}return n.a.createElement("nav",{className:"nav-wrapper"},n.a.createElement("div",{id:"burger",class:"ico-btn",onClick:a},n.a.createElement("span",{class:"ico-btn__burger"})),n.a.createElement("div",{id:"slider",className:"slider"},n.a.createElement("ul",{className:"list"},n.a.createElement(b.a,{onClick:a,to:"/movies"},"Booking spectacle"),e.loggedIn?n.a.createElement(b.a,{onClick:function(){a(),e.signOut()},to:"/#"},"Log out"):n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{onClick:a,to:"/login"},"Login"),n.a.createElement(b.a,{onClick:a,to:"/resigter"},"Register")))))});function C(){return n.a.createElement("div",{className:"w-100"},n.a.createElement("p",{style:{background:"#292a2b",fontSize:"20px",textAlign:"center"},className:"text-white py-4 m-0"},"Do you want to book a ticket for a show?"))}var N=t(19),I=t(12),S=t(13),k=t.n(S),R=t(80),P=t.n(R),x=t(36),U=(t(166),function(e){var a=e.name,t=e.label,r=e.error,s=e.iconClass,l=Object(x.a)(e,["name","label","error","iconClass"]);return n.a.createElement("div",{className:"input-container"},t&&n.a.createElement("label",null," ",t," "),s&&n.a.createElement("div",{className:"input-icon ".concat(s)}),n.a.createElement("input",Object.assign({name:a},l)),r&&n.a.createElement("div",{className:"alert alert-danger"}," ",r," "))}),M=(t(167),function(e){var a=e.label,t=Object(x.a)(e,["label"]);return n.a.createElement("button",Object.assign({className:"btn"},t),a)}),G=(t(168),function(e){function a(){var e,t;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(n)))).state={data:{email:"",password:""},errors:{}},t.schema={email:k.a.string().email().required().label("Email"),password:k.a.string().required().label("Password")},t.handleChange=function(e){var a=e.currentTarget,r=Object(I.a)({},t.state.errors),n=t.validateProperty(a);n?r[a.name]=n:delete r[a.name];var s=Object(I.a)({},t.state.data);s[a.name]=a.value,t.setState({data:s,errors:r})},t.validateProperty=function(e){var a=e.name,r=e.value,n=Object(N.a)({},a,r),s=Object(N.a)({},a,t.schema[a]),l=k.a.validate(n,s).error;return l?l.details[0].message:null},t.validate=function(){var e=k.a.validate(t.state.data,t.schema,{abortEarly:!1});if(!e.error)return null;var a={};return e.error.details.forEach(function(e){return a[e.path[0]]=e.message}),a},t.handleSubmit=function(e){e.preventDefault();var a=t.validate();P.a.isEmpty(a)&&t.props.signIn(t.state.data)},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.state,a=e.data,t=e.errors,r=a.email,s=a.password,l=this.props,o=l.authMessage;return l.loggedIn&&this.props.history.push("/"),n.a.createElement("div",{className:"background-container pt-5"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"header"},"Login"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(U,{name:"email",label:"Email",type:"email",error:t.email,iconClass:"fas fa-envelope",onChange:this.handleChange,placeholder:"Please enter your email...",value:r,autoFocus:!0}),n.a.createElement(U,{name:"password",type:"password",label:"Password",error:t.password,iconClass:"fas fa-key",onChange:this.handleChange,placeholder:"Please enter your password...",value:s}),o&&n.a.createElement("p",{className:"text-white"},o),n.a.createElement(M,{disabled:this.validate(),type:"submit",label:"Login"}))))}}]),a}(n.a.Component)),L=Object(v.b)(function(e){return{loggedIn:e.auth.loggedIn,authMessage:e.auth.authMessage}},function(e){return{signIn:function(a){return e((t=a,function(){var e=Object(y.a)(E.a.mark(function e(a){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/users/login",t);case 3:r=e.sent,a({type:"LOGIN_SUCCESS",payload:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"LOGIN_ERROR",error:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(a){return e.apply(this,arguments)}}()));var t}}})(G),_=function(e){function a(){var e,t;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(n)))).state={data:{email:"",password:"",passwordRepeat:""},errors:{},passwordError:""},t.validateProperty=function(e){var a=e.name,r=e.value,n=Object(N.a)({},a,r),s=Object(N.a)({},a,t.schema[a]),l=k.a.validate(n,s).error;return l?l.details[0].message:null},t.handleChange=function(e){var a=e.currentTarget,r=Object(I.a)({},t.state.errors),n=t.validateProperty(a);n?r[a.name]=n:delete r[a.name];var s=Object(I.a)({},t.state.data);s[a.name]=a.value,t.setState({data:s,errors:r})},t.validate=function(){var e=k.a.validate(t.state.data,t.schema,{abortEarly:!1});if(!e.error)return null;var a={};return e.error.details.forEach(function(e){return a[e.path[0]]=e.message}),a},t.handleSubmit=function(e){e.preventDefault();var a=t.state.data,r=a.password,n=a.passwordRepeat,s=a.email;r!==n?t.setState({passwordError:"The passwords doesn not match."}):t.props.signUp({email:s,password:r})},t.schema={email:k.a.string().email().required().label("Email"),password:k.a.string().min(8).required().label("Password"),passwordRepeat:k.a.string().required().label("Repear Password")},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props,a=e.authMessage,t=e.loggedIn,r=this.state,s=r.errors,l=r.passwordError,o=this.state.data,c=o.email,i=o.password,u=o.passwordRepeat;return t&&this.props.history.push("/"),n.a.createElement("div",{className:"background-container pt-5"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"header"},"Register Form"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(U,{name:"email",label:"Email",type:"email",error:s.email,iconClass:"fas fa-envelope",onChange:this.handleChange,placeholder:"Please enter your email...",value:c,autoFocus:!0}),n.a.createElement(U,{name:"password",label:"Password",type:"password",error:s.password,iconClass:"fas fa-key",onChange:this.handleChange,placeholder:"Please enter your password...",value:i}),n.a.createElement(U,{name:"passwordRepeat",type:"password",label:"Repeat Password",error:s.passwordRepeat,iconClass:"fas fa-key",onChange:this.handleChange,placeholder:"Repeat your password...",value:u}),a||l?n.a.createElement("p",{className:"bg-info text-white"}," ",a," ",l):n.a.createElement(n.a.Fragment,null," "),n.a.createElement("button",{type:"submit",className:"btn special-btn",disabled:this.validate()}," ","Sign Up"," "))))}}]),a}(n.a.Component),D=Object(v.b)(function(e){return{loggedIn:e.auth.loggedIn,authMessage:e.auth.authMessage}},function(e){return{signUp:function(a){return e((t=a,function(){var e=Object(y.a)(E.a.mark(function e(a){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/users/signup",t);case 3:r=e.sent,a({type:"SIGNUP_SUCCESS",payload:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"SIGNUP_ERROR",error:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(a){return e.apply(this,arguments)}}()));var t}}})(_),B=(t(169),t(18)),F={loggedIn:!1,userData:{},authMessage:null},q=Object(B.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN_SUCCESS":return Object(I.a)({},e,{loggedIn:!0,userData:a.payload.data.userData,authMessage:a.payload.data.message});case"LOGIN_ERROR":return Object(I.a)({},e,{authMessage:a.error.response.data.error});case"SIGNUP_SUCCESS":return Object(I.a)({},e,{loggedIn:!0,userData:a.payload.data.userData,authMessage:a.payload.data.message});case"SIGNUP_ERROR":return Object(I.a)({},e,{authMessage:a.error.response.data.error});case"SIGNOUT":return Object(I.a)({},e,{userData:{},loggedIn:!1,authMessage:null});default:return e}}}),T=[t(81).a],A=Object(B.e)(q,{},Object(B.d)(B.a.apply(void 0,T))),J=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(v.a,{store:A},n.a.createElement(m.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(j,null),n.a.createElement(p.a,null,n.a.createElement(h.a,{exact:!0,path:"/login",component:L}),n.a.createElement(h.a,{path:"/resigter",component:D}),n.a.createElement(g.a,{exact:!0,from:"/",to:"/booking"})),n.a.createElement(C,null))))}}]),a}(r.Component);l.a.render(n.a.createElement(J,null),document.getElementById("root"))},83:function(e,a,t){e.exports=t(171)},88:function(e,a,t){}},[[83,1,2]]]);
//# sourceMappingURL=main.1f2c31e7.chunk.js.map